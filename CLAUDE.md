# Expo 2025 協働制作サイト - AI開発ガイドライン

## プロジェクト概要
このプロジェクトは万博2025向けの協働制作デモサイトです。Claude Code、Codex、その他AIツールを使用して、リアルタイムで開発過程を可視化し、成果を共有します。

## 重要な制約とルール

### 1. ディレクトリ制約
- **作業範囲**: `/Users/yamamotoshin/00-business/CoPallet/99-dev/CraftStadium/expo-collaborative-site/` 内のみで作業
- **絶対禁止**: 親ディレクトリや他のプロジェクトへのアクセス・変更
- **ファイル操作**: このディレクトリ内のファイルのみ作成・編集・削除可能

### 2. 自動開発モード

#### 基本動作
- ユーザーの指示を受けたら、自動的に実装を進める
- 各変更は小さな単位でコミット
- エラーが発生したら自動的に修復を試みる

#### 開発フロー
1. 要件の理解と計画作成
2. 実装の開始
3. テスト実行（可能な場合）
4. 履歴の自動記録
5. ビルドエラーがない状態を維持

### 3. 履歴管理システム

#### 記録形式
すべての貢献は以下の形式で記録：
- 日時（ISO 8601形式）
- 作業者（AI/Human）
- 変更内容の要約
- 変更したファイル一覧
- コミットハッシュ（該当する場合）

#### 記録場所
- `contributions.json`: 機械読み取り可能な形式
- README.md: 最新5件の履歴を表示
- Webページ: リアルタイムで履歴を表示

### 4. 必須コマンド

#### 開発前チェック
```bash
npm run lint
npm run typecheck
```

#### ビルドチェック
```bash
npm run build
```

#### 開発サーバー起動
```bash
npm run dev
```

### 5. コンポーネント開発ガイドライン

#### 新規コンポーネント作成時
1. 既存のコンポーネント構造を確認
2. 同じ命名規則とディレクトリ構造を維持
3. TypeScriptの型定義を必須とする
4. スタイリングは既存のTailwindクラスを優先使用

#### ファイル構成
```
src/
  components/
    [ComponentName]/
      index.tsx         # メインコンポーネント
      types.ts          # 型定義（必要な場合）
      [ComponentName].test.tsx  # テスト（推奨）
```

### 6. 協働作業の可視化

#### リアルタイム更新
- 各変更を即座にWebページに反映
- 開発過程をステップごとに表示
- エラーや修正も含めて透明性を保つ

#### 成果の表示
- Before/After の比較
- 変更理由の明確化
- AIと人間の協働過程の可視化

### 7. エラーハンドリング

#### エラー発生時の対応
1. エラー内容を履歴に記録
2. 自動修復を試みる
3. 修復できない場合は、詳細なエラー情報を提供
4. ユーザーに対処法を提案

### 8. セキュリティ

#### 禁止事項
- APIキーやシークレットのハードコーディング
- 個人情報の記録
- 外部への不正なデータ送信

#### 推奨事項
- 環境変数の使用
- .gitignoreの適切な設定
- セキュアなコーディングプラクティスの遵守

### 9. パフォーマンス最適化

#### ビルド最適化
- 不要な依存関係を追加しない
- コード分割とLazy Loadingの活用
- 画像の最適化

#### 実行時最適化
- React.memoやuseMemoの適切な使用
- 無限ループの防止
- メモリリークの防止

### 10. コミットメッセージ規則

```
<type>: <subject>

<body>

Contributed by: <AI-tool-name>
Timestamp: <ISO-8601>
```

Types:
- feat: 新機能
- fix: バグ修正
- docs: ドキュメント
- style: フォーマット
- refactor: リファクタリング
- test: テスト
- chore: その他

## 更新履歴

このファイルは協働開発のガイドラインとして継続的に更新されます。
各AIツールはこのガイドラインに従って開発を進めてください。